# การศึกษาหลักการทำงานของ Microcontroller ผ่านเว็บไซต์ Risc-V
นายชนกานต์ สนืทดี 6310680019 
## โปรแกรมแสดงตัวอักษร บน Output (C0000000)
โดยแลปนี้จะทำการศึกษาหลักการทำงานของ microcontroller ด้วยชุดคำสั่งแบบสากลหรือ RISC-V 

ซึ่งเป็นการภาษาแอสเซมบลี ซึ่งจะทำการศึกษาด้วยโปรแกรมจำลอง microcontroller ผ่านเว็บไซต์ Risc-V

หน้าตาโปรแกรมจำลองของ microcontroller เป็นไปตามรูปภาพด้านล่าง

![1431](https://user-images.githubusercontent.com/98946284/160732845-c95a9e36-20d2-4271-8fe5-7831237e37f4.jpg)

จากรูปสามารถแบ่งออกได้เป็น 4 ส่วน ได้ดังนี้

![1425](https://user-images.githubusercontent.com/98946284/160733318-295ba399-539b-4704-9c3b-5d908d931b7d.jpg)

### ═══════════ ส่วนที่ 1 **Memory** ══════════════════════
![1426](https://user-images.githubusercontent.com/98946284/160733554-3cf6a060-71e7-4691-af7c-243e02f70c91.jpg)

Memory คือหน่วยความจำที่สามารถเก็บข้อมูลได้เป็นจำนวนมาก ซึ่งจะเก็บชุดเลขฐาน 16 ไว้ใน Address 

เราสามารถ อ่านเป็น byte, word, half-word ใช้เรียกตามขนาดของข้อมูลที่จัดเก็บ

โดย 1 byte คือขนาดของ 1 Address ยกตัวอย่างเช่น จากรูปด้านบน 

1 byte ของ Address 00000000 คือ 93,   1 byte ของ Address 0000001a คือ 1f เป็นต้น 

1 word คือขนาดของ 4 Address เริ่มนับจาก Address 00000000 ไปทีละ 4 ตามแถวแนวตั้ง ตามรูป เมื่ออ่านต้องอ่านจากขวาไปซ้าย เช่น

1 word ของ Address 00000000 คือ 02000093 (02-00-00-93 อ่านจากขวาไปซ้าย)

### ═══════════ ส่วนที่ 2 วงจรคำนวณ ══════════════════════

คือ การทำงานการคำนวณภายในของ Microcontroller

![1428](https://user-images.githubusercontent.com/98946284/160737480-3544a6bf-dcea-413e-bead-63ffee67eccd.jpg)

### ═══════════ ส่วนที่ 3 General-purpose regs ══════════════════════

![1429](https://user-images.githubusercontent.com/98946284/160737776-41af4057-41e5-49d8-9fbc-370afb45ae73.jpg)

คือหน่วยความจำ register เป็นหน่วยความจำแบบชั่วคราว ใช้เก็บข้อมูลที่จำเป็นในการคำนวณ

หรือสถานะการทำงานของหน่วยประมวลผลกลาง มักถูกอ้างถึงบ่อยในระหว่างการคำนวณของหน่วยประมวลผล

พื้นที่ในการจัดเก็บข้อมูลจะเก็บข้อได้น้อยกว่าในส่วนของ Memory

### ═══════════ ส่วนที่ 4 Input-Output ══════════════════════

![1430](https://user-images.githubusercontent.com/98946284/160739145-562abd69-27ef-427d-804f-24b49a82c71b.jpg)

จากรูปแบ่งออกได้เป็น 3 ส่วนคือ

- Text I/O คือ Input-Output ของ Text(ตัวอักษร) โดยผ่านการเขียนโปรแกรมที่เป็นภาษา Assembly ของ Risc-V
- General-purpose I/O คือ Input-Output ที่ใช้งานได้ตามวัตถุประสงค์ทั่วไป เช่น I/O สำหรับเปิดปิดสวิตช์ไฟหรือ sensor เป็นต้น
- Bitmap output คือ Output ที่เป็นการแสดงภาพผ่านการเขียนโปรแกรมบน memory

### ▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃▃

## การทดลองการแสดงตัวอักษร
จากส่วนที่ 1 คำสั่งหลักๆที่ใช้ในการทดลองมี 6 คำสั่ง ดังนี้

![1512](https://user-images.githubusercontent.com/98946284/160751257-6689fed0-ba96-4e67-beee-68b5daa7e300.jpg)

จากรูป
1. add immediate (addi) คือ การเอาเลข 32 มาบวกกับเลขที่ x0 ที่เป็น General-purpose regs แล้วไปใส่ใน x1 (ซึ่ง x0 เป็นค่า register พิเศษ ซึ่งมีค่าแค่ 0 เสมอแก้ค่าไม่ได้ แต่ x1 , x2 , ... x31 เราสามารถแก้ไขได้)
2. low upper immediate (lui) คือ การเอาค่าที่อยู่ทางขวาที่มีค่า 32 bit เมื่อเปลี่ยนเป็นเลขฐาน 16 ก็จะได้ 8 ตัวอักษร ไปใส่ใน x2 โดยใส่แค่ 20 bit แรก  
3. load byte unsigned (lbu) คือ การเอาหน่วยความจำที่ x1 จำนวน 1 byte มาใส่ใน x3
4. branch on equal (beq) คือ ถ้าในกรณีที่ x3 เท่ากับ x0 จะบวกเข้าไป 16 แล้ว jumpไป +16 ของ address
5. store byte (sb) คือ การนำข้อมูลใน x3 ที่ไม่เป็น 0 ไปเก็บไว้ใน address ของ x2
6. คำสั่ง jal หรือ jump คือ การกำหนดไปยังค่าที่เราได้กำหนดไว้ เช่น ถ้ากำหนดไว้ -16 ก็จะ jumpถอยหลังไป 16 หรือถ้ากำหนดไว้เป็น 0 ก็จะวน loop ซ้ำอยู่ที่เดิมนั่นเอง

